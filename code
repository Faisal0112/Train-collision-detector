#include <Servo.h>
Servo myservo; 
const int trigPin = 9; 
const int echoPin = 8;
const int buzzerpin=2;
long int duration,inches,cm;
int pos = 0;   
int enA=3;
int enB=5;
const int in1=13;
const int in2=12;
const int in3=11;
const int in4=10;
void setup() { 
 pinMode(buzzerpin,OUTPUT);
 Serial.begin(9600); 
 myservo.detach();
} 
void loop() 
{ 
 ultrasonic(0); 
 while(cm<50)
 {
   Serial.print("Pathole detected \n");
   analogWrite(enB,0);
   analogWrite(enA,0);
   tone(buzzerpin,1000);
   digitalWrite(buzzerpin,HIGH);
   servo(0);
   myservo.detach();
   ultrasonic(5);
 }
    digitalWrite(buzzerpin,LOW);
    analogWrite(enB,80);
    digitalWrite(in1,LOW);
    digitalWrite(in2,HIGH);
    analogWrite(enA,120);
    digitalWrite(in3,HIGH);
    digitalWrite(in4,LOW);
  
} 
long microsecondsToCentimeters(long microseconds)
{
  return microseconds/ 29/ 2;
}
void servo(int)
{
  myservo.attach(7);
  for (pos = 0; pos <= 90; pos += 1) { 
    myservo.write(pos);              
    delay(30);  
    break;     
   }
  for (pos =90; pos >= 0; pos -= 1) { 
    myservo.write(pos);              
    delay(30);                    
   } 
   myservo.detach();
   noTone(buzzerpin);
}
void ultrasonic(int)
{
 pinMode(trigPin, OUTPUT); 
 digitalWrite(trigPin, HIGH); 
 delayMicroseconds(20); 
 digitalWrite(trigPin, LOW); 
 delayMicroseconds(10); 
 digitalWrite(trigPin, HIGH); 
 pinMode(echoPin, INPUT); 
 duration = pulseIn(echoPin, HIGH); 
 cm = microsecondsToCentimeters(duration);  
 Serial.print(cm); 
 Serial.print("cm"); 
 Serial.println();
delay(100);
}
